# AWS EC2

EC2(Elastic Compute Cloud)는 독립된 컴퓨터를 임대해주는 서비스입니다. 

본 수업의 하위 수업에서는 EC2의 개념과 사용방법을 알아봅니다. 

## EC2 소개

EC2 아마존 웹서비스의 대표적 상품.

AWS 콘솔로 들어가면 EC2 를 클릭. EC2의 지역을 선택.

EC2는 가장 먼저 생긴 서비스 중에 하나이고 가장 범용적인 서비스이면서 가장 관심있어 할만한 서비스임.

여러분에게 독립된 컴퓨터 한대를 통채로 임대해주는 상품임.

Instances = 컴퓨터 1대가 인스턴스 1대임. 

Launch Instance 버튼을 클릭하면 컴퓨터를 만들 수 있음. 그냥 클릭클릭클릭하면 컴퓨터가 금방 생성된다 라는 것만 느끼면됨.

단 1분만에 컴퓨터 1대가 만들어짐. 컴퓨터에 연격제어로 접속해서 컴퓨터가 마치 내 책상위 컴퓨터 처럼 원격으로 제어 가능.

조작하는 모습은 여러분의 상상에 맡기고 일단 생성하는 모습을 보여줌. 1분밖에 안걸렸다를 인상적으로 받아들여야됨.

더이상 컴퓨터가 필요없으면 오른쪽 클릭 Instance States - Terminate 를 클릭하면 컴퓨터가 삭제됨. 

## EC2 인스턴스 타입

Instances로 들어가야 인스턴스를 생성가능함. Launch Instance를 선택하면 인스턴스 생성 가능.

아마존 리눅스를 기본적으로 제공. 레드햇, 수세 리눅스, 우분투 제공. 이것들은 1년동안 무료로 사용가능한 제품들.

윈도우도 윈도우 서버 2012는 1년동안 무료로 사용할수 있음. 아마존 때문이 아니고 마소의 라이센스 정책 때문에..

우분투 선택

Choose an Instance Type (여러분의 임대 컴퓨터 사양을 선택.)

그중에 프리티어 선택. 나머지 컴퓨터는 컴퓨터를 키가마자 과금이 발생.

type = 각각의 컴퓨터의 사양. 가장 저렴하고 성능이 낮은건 nano

vCPUs(virtual CPU) = 몇개의 cpu가 달려있나.
Memory = 몇 기가의 메모리를 가지고 있나.
Network Performance = 네트워크 성능. (가격에 따라 차등이 있음)

AWS를 이용해서 여러가지를 하다보면 숫자에 대한 감각이 생김.

여러분이 하는 일에 따라 cpu가 강해야 되는 경우가 있고 메모리가 강해야되는 경우가 있음. 그것에 따라 상품이 구별되있음.

m으로 시작하는게 있고 c로 시작하는게 있음 (m은 메모리에 우위 c는 cpu에 우위) 자신의 환경에 따라 적합한 인스턴스 선택..

인스턴스 타입은 가격과 관련됨.

## EC2 가격정책

AWS EC2 Price 등으로 검색하면 가격정책을 수비게 볼 수 있음.(https://aws.amazon.com/ko/ec2/pricing/)

프리 티어

AWS의 프리 티어를 사용하는 신규 AWS 고객은 Amazon EC2를 무료로 시작할 수 있습니다. 신규 AWS 고객은 가입 시 1년 동안 매달 다음과 같은 EC2 서비스를 받게 됩니다.

* Linux, RHEL 또는 SLES를 구동하는 EC2 t2.micro 인스턴스 750시간 사용
* Microsoft Windows Server를 구동하는 EC2 t2.micro 인스턴스 750시간 사용
* Elastic Load Balancing 750시간 무료 사용 + 15GB의 데이터 처리 무료 제공
* 원하는 범용(SSD) 또는 마그네틱 조합으로 Amazon Elastic Block Storage 30GB + I/O 2백만 건(마그네틱) 및 스냅샷 스토리지 1GB
* 모든 AWS 서비스를 합산해 15GB의 데이터 전송
* 1GB의 리전 데이터 전송 무료 제공

**온디맨드 인스턴스**

여러분이 필요할때마다 컴퓨터를 키고 끌수 있는 인스턴스

리눅스냐 윈도우냐에 따라 가격차이 있음.

t2.micro 같은 경우 시간당 0.02달러 한국돈으로 20원? 게임방 생각하면 쌈. 하루에 480원정도? 한달에 14400원

잠깐 쓰면 가격경쟁력이 있음. 개발용이면 나노를 사용하게 되면 개발용으로는 충분할수 있음. 거의 7200원으로 쓸수있음.

제일 비싼 컴퓨터는 시간당 6700원  d2.8xlarge 컴퓨터 성능을 따지면 그렇게 비싼건 아님. (36코어 116메모리) 하루에 16만원

**예약 인스턴스**

켜고 끄거나 할때 경우에 따라 훨씬 저렴하게 사용할수있음 최대 75퍼 절약 할 수 있음.

**스팟 인스턴스**

아주 재미있고 특이한 인스턴스가 있음. 엄청난 컴퓨터를 아마존 웹 서비스가 보유하고 있음. (노는 컴퓨터가 항상 존재함)

노는 컴퓨터가 많으면 저렴. 노는 컴퓨터가 없으면 가격이 쎔

## EC2 인스턴스 장치설정

Number of instances = 생성하는 인스턴스 개수 1로 설정
Purchasing option Request Spot Instances 스팟 인스턴스를 하고 싶으면 체크(디폴트 체크 해제)
Shutdown behavior = stop (인스턴스일시정지), ternimate(인스턴스 삭제)
Monitoring = 체크시 돈이 부과된다.

Add Storage

EBS

Size 8 기본값 30기가 까지는 무료. 35기가 하면 유료

Volume Type : SSD가 훨씬 빠르겟죠? Magrtice보다

Delete on Termination 컴퓨터가 삭제되면 알아서 저장장치도 삭제됨. 체크해제하면 컴퓨터는 삭제되지만 하드는 삭제안됨. 기본값은 체크

## EC2 태그와 보안그룹

태그를 인스턴스에 붙이는 방법을 살펴볼 예정.

Tag Instance

Configure Security Group 

아주 중요한 부분. 일종의 방화벽 무료료 제공을 함.

이걸 하려면 지식이 필요함. 네트워크에 대해 조금 알아야됨. (오픈튜토리얼중에 인터넷 편을 들으면 됨 (ip, 도메인, port 등 설명))

우리가 만든 인스턴스에 접속하는 방식은 여러가지가 있을것. (원격접속, ftp, 웹서버 등) 모든 경우를 다 허용하는건 문을 여는거랑 다름 없기 때문에.

제한된 방법만을 통해 우리의 인스턴스로 접속하는 것을 허용하는 정책을 정하는 것. 리눅스의 경우 SSH는 기본 추가 되있음. (원격제어로 접속해야 되기 때문)

윈도우의경우 RDP가 지정되있음. (윈도우 원격접속은 RDP를 통해 제어하기 때문에)

## EC2 인스턴스 비밀번호 생성

인스턴스를 만드는 마지막 단계 까지옴.

서버 자원은 굉장히 소중해서. 복잡한 비밀번호를 써서 우리의 인스턴스를 공격으로 부터 방어하는 그러한 것임.

Create a new key pair로 비밀번호 발급 받을 수 있음 그리고 Download key Pair를 클릭하면 비밀번호를 다운받을 수 있음 그리고 우리의 인스턴스에 그 비밀번호를 심어놓음.

그래서 우리의 인스턴스를 접속하려면 그 비밀번호를 통해서 접속해야 됨. 공개키 비공개키.. 아마존에서 발급해주는 비밀번호는 엄청나게 긴 비밀번호이기 때문에. 안전함.

파일로 저장되있기 때문에 우리의 머리속에 있는 것보다는 위험함. (탈취될수있는 가능성이 한편으로 존재함) 양날의 검. 지금 다운 받은 파일을 굉장히 안전하고 소중하게 저장해야됨.

한번 파일을 다운받으면 다시는 비밀번호를 알려주지 않음. 그러면 여러분의 컴퓨터는 다시는 접속할 수 없는 상태가 됨. 아주 소중하게 다뤄야 됨.